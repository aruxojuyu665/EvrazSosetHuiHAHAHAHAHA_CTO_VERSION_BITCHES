# –ì–û–°–¢ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä: RAG —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤

[![Tests](https://img.shields.io/badge/tests-19%20passed-brightgreen)](TESTING_REPORT.md)
[![Coverage](https://img.shields.io/badge/coverage-100%25%20(tested%20modules)-brightgreen)](TESTING_REPORT.md)
[![Version](https://img.shields.io/badge/version-0.4.0-blue)](CHANGELOG.md)
[![Python](https://img.shields.io/badge/python-3.11-blue)](requirements.txt)

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –ì–û–°–¢ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º RAG (Retrieval-Augmented Generation) –ø–æ–¥—Ö–æ–¥–∞. **–≠—Ç–∞ –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Milvus Lite –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –±–µ–∑ Docker.**

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –ì–û–°–¢. –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∞—Å—Å–∞—Ö –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ —Å—Ç–∞–ª–∏, –∏—Ö —Ö–∏–º–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–∞–≤–µ, –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö, –∞ —Ç–∞–∫–∂–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚úÖ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É
‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏
‚úÖ **–ê–Ω–∞–ª–∏–∑ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π** - –≤—ã—è–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –º–µ–∂–¥—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏
‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ GPU, –Ω—É–ª–µ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å API, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
üÜï **Milvus Lite** - —É–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç Docker
‚úÖ **REST API** (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è) - –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|------------|
| **LLM** | Claude 3.5 Sonnet (OpenRouter) | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑ |
| **Embeddings** | –õ–æ–∫–∞–ª—å–Ω—ã–µ (multilingual-e5-large) –∏–ª–∏ OpenAI | –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ |
| **Vector Database** | üÜï **Milvus Lite 2.3.5** | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–∏—Å–∫ –≤–µ–∫—Ç–æ—Ä–æ–≤ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è) |
| **RAG Framework** | LlamaIndex 0.9.48 | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è RAG pipeline |
| **PDF Processing** | PyPDF2, pdfplumber | –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF |
| **GPU Support** | ‚úÖ CUDA 12.1+ (optional) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ |
| **Deployment** | –õ–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–±–µ–∑ Docker) | –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ |

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](docs/SYSTEM_ARCHITECTURE.md)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—Å Milvus Lite)

–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Milvus Lite –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É. –¢–µ–ø–µ—Ä—å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è Docker –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω—É–∂–Ω—É—é –≤–µ—Ç–∫—É
git clone https://github.com/aruxojuyu665/EvrazSosetHuiHAHAHAHAHA_CTO_VERSION_BITCHES.git
cd EvrazSosetHuiHAHAHAHAHA_CTO_VERSION_BITCHES
git checkout milvus-lite-migration

# 2. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.11 -m venv venv
source venv/bin/activate

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à OPENROUTER_API_KEY

# 5. –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
# Milvus Lite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (milvus_lite.db)
python -m src.main index --input data/raw/GOST_27772-2021.pdf --create-new

# 6. –ò–∑–≤–ª–µ—á—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∞—Å—Å–µ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ C235
python -m src.main extract --class-name C235
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [QUICKSTART_LITE.md](docs/QUICKSTART_LITE.md)

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### CLI –∫–æ–º–∞–Ω–¥—ã

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 4 –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

#### 1. `index` - –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```bash
python -m src.main index --input <path> [--create-new]
```
- `--input` - –ø—É—Ç—å –∫ PDF —Ñ–∞–π–ª—É –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- `--create-new` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å (—É–¥–∞–ª–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

#### 2. `extract` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∞—Å—Å–µ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏
```bash
python -m src.main extract --class-name <name> [--output <file>]
```
- `--class-name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: C235)
- `--output` - —Ñ–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 3. `query` - –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```bash
python -m src.main query --question "<–≤–æ–ø—Ä–æ—Å>" [--output <file>]
```
- `--question` - –≤–æ–ø—Ä–æ—Å –∫ —Å–∏—Å—Ç–µ–º–µ
- `--output` - —Ñ–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 4. `stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
python -m src.main stats
```
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Milvus Lite.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Milvus Lite)

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `MILVUS_URI`.

```env
# OpenRouter API Configuration
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet

# Embedding Configuration
EMBEDDING_TYPE=local
LOCAL_EMBEDDING_MODEL=intfloat/multilingual-e5-large
LOCAL_EMBEDDING_DEVICE=cuda

# Milvus Lite Configuration
# URI - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Milvus Lite
MILVUS_URI=./milvus_lite.db
MILVUS_COLLECTION_NAME=gost_documents
MILVUS_DIMENSION=1024
MILVUS_METRIC_TYPE=COSINE

# Deprecated: —Å—Ç–∞—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Milvus Standalone (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
# MILVUS_HOST=localhost
# MILVUS_PORT=19530

# Application Settings
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
TOP_K_RESULTS=5
```

---

## üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ RunPod (—Å Milvus Lite)

–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ RunPod —Ç–∞–∫–∂–µ —É–ø—Ä–æ—â–µ–Ω–æ. Docker –±–æ–ª—å—à–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**üìò [–ü–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å Milvus Lite](docs/RUNPOD_DEPLOYMENT_LITE.md)**

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Milvus Lite)](docs/QUICKSTART_LITE.md)** - –Ω–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É
- **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](docs/SYSTEM_ARCHITECTURE.md)** - –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **[–û—Ç—á–µ—Ç Code Review (Milvus Lite)](CODE_REVIEW_MILVUS_LITE.md)** - –∞–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **[–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Milvus Lite](docs/MILVUS_LITE_MIGRATION.md)** - –∏—Å—Ö–æ–¥–Ω—ã–π –ø–ª–∞–Ω
